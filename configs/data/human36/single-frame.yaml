# create single frame annotation dataset
dataloader:
  base_dataloader: # depends on hardware:)
    collate_fn:
      # use `mmcv.parallel.DataContainer` to send Camera object.
      name: mmcv_datacontainer_collate

dataset:
  dataset_base_cfg:
    name: "Human36AnnotationDataset"
    args:
      base_dir: "./human36m"

  dataset_subset_cfg:
    trn:
      args:
        subjects:
          - 1
          - 5
          - 6
          - 7
          - 8
    val:
      args:
        subjects:
          - 9
          - 11

transform:
  [
    [
      "trn,val",
      [
        { "name": "Create2DProjection" },
        { "name": "WorldToCameraCoord" },
        { "name": "CenterAroundJoint" },
        {
          "name": "MultipleKeyTransform",
          "args":
            {
              "keys": ["joint", "joint_2d"],
              "name": "ToTensor",
              "args": { "dtype": "float" },
            },
        },
        {
          "name": "MultipleKeyTransform",
          "args":
            {
              "keys": ["camera", "meta"],
              "name": "CollectDataContainer",
              "args": { "cpu_only": True },
            },
        },
        {
          "name": "FastNormalize",
          "args":
            {
              "mean": "{const.normalization_mean}",
              "std": "{const.normalization_std}",
              "key": "joint",
            },
        },
        {
          "name": "FastNormalize",
          "args":
            {
              "mean": "{const.normalization_mean_2d}",
              "std": "{const.normalization_std_2d}",
              "key": "joint_2d",
            },
        },
      ],
    ],
  ]

# other useful configs.
const:
  task: "joint lifting"
  num_joints: 17

  normalization_mean:
    - 0.0
    - 55.13095003627039
    - 212.47816798349012
    - 386.3335772451566
    - -55.13104568977698
    - 126.72167729445096
    - 304.8913198124597
    - -78.97671802658489
    - -181.2801294815762
    - -207.78378340281157
    - -246.60430851577476
    - -209.75715339168988
    - -161.0527482669428
    - -143.8003857718934
    - -99.31092875147561
    - 21.56259357082905
    - 90.71726208059506

  normalization_std:
    - 0.0001
    - 53.40743652057742
    - 149.1366647979204
    - 332.75411902514793
    - 53.407532660904494
    - 230.254330762241
    - 421.25536461584454
    - 109.23906078511108
    - 214.8082623854661
    - 261.86190967810535
    - 303.31403104452096
    - 136.2143440821917
    - 33.88532015723774
    - 168.9393335052613
    - 231.99935074785193
    - 193.72307460149764
    - 229.5416921918517

  normalization_mean_2d:
    - 82.22755572571894
    - 93.9711561937361
    - 129.87341934626798
    - 171.98573957744327
    - 70.08459998678214
    - 113.85067264434056
    - 156.82414275711153
    - 63.66131826686143
    - 38.2691350442841
    - 30.553163253327646
    - 21.40525341447111
    - 31.847708570472744
    - 44.23259513026189
    - 46.89965135501889
    - 57.49767904869024
    - 84.28654230153474
    - 97.62470687611409

  normalization_std_2d:
    - 236.30116094600965
    - 223.3494911743147
    - 271.62922370952975
    - 317.3301851531254
    - 250.3553139763339
    - 294.1089524284145
    - 340.7590220640192
    - 209.40025179491502
    - 182.77950286744672
    - 171.35174577389512
    - 160.26081457946407
    - 205.08503533115072
    - 243.43688715065446
    - 260.4658866873485
    - 177.60084439532363
    - 194.28902158608352
    - 209.96135559785336
